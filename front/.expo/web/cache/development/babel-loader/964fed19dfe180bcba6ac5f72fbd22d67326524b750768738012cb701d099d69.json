{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ToastAndroid from \"react-native-web/dist/exports/ToastAndroid\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { Card, Button } from 'react-native-elements';\nimport styles from \"./HomeStyle\";\nimport Icon3 from \"@expo/vector-icons/AntDesign\";\nimport * as RootNavigation from \"../navigator/RootNavigation\";\nimport { FAB } from '@rneui/themed';\nimport storageService from \"../../storageService\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar Home = function Home(_ref) {\n  var navigation = _ref.navigation,\n    wishList = _ref.wishList,\n    setWishList = _ref.setWishList;\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setLoading = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    data = _useState4[0],\n    setData = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    favorite = _useState6[0],\n    setFavorite = _useState6[1];\n  var callStorage = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var userData = yield storageService.get('userData');\n      return userData.token;\n    });\n    return function callStorage() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var getMovies = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      var token = yield callStorage();\n      try {\n        var response = yield fetch('http://192.168.0.10:3000/api/movie', {\n          headers: {\n            'authorization': \"Bearer \" + token\n          }\n        });\n        var json = yield response.json();\n        setData(json);\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function getMovies() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    getMovies();\n  }, []);\n  var openToast = function openToast(message) {\n    ToastAndroid.show(message, 3000);\n  };\n  var openChat = function openChat() {\n    RootNavigation.navigate('Chat');\n  };\n  var CustomTitle = function CustomTitle() {\n    return _jsx(Text, {\n      style: {\n        fontFamily: 'Aachen',\n        color: 'black',\n        fontSize: 18\n      },\n      children: \"Adicionar a Wishlist\"\n    });\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsx(View, {\n      style: styles.container,\n      children: isLoading ? _jsx(ActivityIndicator, {\n        size: 'large'\n      }) : _jsx(FlatList, {\n        data: data,\n        keyExtractor: function keyExtractor(_ref4) {\n          var _id = _ref4._id;\n          return _id;\n        },\n        renderItem: function renderItem(_ref5) {\n          var item = _ref5.item;\n          return _jsxs(Card, {\n            theme: {\n              colors: {\n                primary: '#000000'\n              }\n            },\n            children: [_jsx(Card.Title, {\n              children: _jsx(Text, {\n                style: [styles.card],\n                children: item.name\n              })\n            }), _jsx(Card.Divider, {}), _jsx(Card.Image, {\n              style: {\n                resizeMode: 'contain',\n                marginStart: 50,\n                width: 200,\n                height: 300,\n                alignContent: 'center',\n                alignItems: 'center'\n              },\n              onPress: function onPress() {\n                return RootNavigation.navigate(\"MovieDetails\", {\n                  item: item\n                });\n              },\n              source: {\n                uri: item.image\n              }\n            }), _jsx(View, {\n              style: {\n                flexDirection: \"row\",\n                marginBottom: \"5%\",\n                marginTop: \"5%\",\n                alignSelf: 'center'\n              },\n              children: _jsxs(Text, {\n                style: [styles.card],\n                children: [\"G\\xEAnero: \", item.gender]\n              })\n            }), _jsx(View, {\n              style: {\n                flexDirection: \"row\",\n                marginBottom: \"7%\",\n                marginTop: \"3%\",\n                alignSelf: 'center'\n              },\n              children: _jsxs(Text, {\n                style: [styles.card],\n                children: [\"Dura\\xE7\\xE3o: \", item.duration]\n              })\n            }), favorite ? _jsx(Icon3, {\n              onPress: function onPress() {\n                return setFavorite(false);\n              },\n              name: \"pushpin\",\n              size: 25,\n              color: \"#fcb300\"\n            }) : _jsx(Icon3, {\n              onPress: function onPress() {\n                return setFavorite(true);\n              },\n              name: \"pushpino\",\n              size: 25,\n              color: \"white\"\n            }), _jsx(Button, {\n              buttonStyle: [styles.buttonStyle],\n              onPress: function onPress() {\n                if (wishList.some(function (xpto) {\n                  if (xpto.name == item.name) {\n                    return true;\n                  }\n                  return false;\n                })) {\n                  openToast(\"Filme jÃ¡ adicionado na wishlist\");\n                } else {\n                  openToast(\"Filme adicionado na wishlist\");\n                  setWishList([].concat(_toConsumableArray(wishList), [item]));\n                }\n              },\n              title: _jsx(CustomTitle, {})\n            })]\n          }, item._id);\n        }\n      })\n    }), _jsx(FAB, {\n      style: styles.fab,\n      visible: true,\n      icon: {\n        name: 'chat',\n        color: 'white'\n      },\n      color: \"green\",\n      onPress: function onPress() {\n        return openChat();\n      }\n    })]\n  });\n};\nexport default Home;","map":{"version":3,"names":["React","useState","useEffect","Text","View","ToastAndroid","ActivityIndicator","FlatList","Card","Button","styles","Icon3","RootNavigation","FAB","storageService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","_ref","navigation","wishList","setWishList","_useState","_useState2","_slicedToArray","isLoading","setLoading","_useState3","_useState4","data","setData","_useState5","_useState6","favorite","setFavorite","callStorage","_ref2","_asyncToGenerator","userData","get","token","apply","arguments","getMovies","_ref3","response","fetch","headers","json","error","console","openToast","message","show","openChat","navigate","CustomTitle","style","fontFamily","color","fontSize","children","container","size","keyExtractor","_ref4","_id","renderItem","_ref5","item","theme","colors","primary","Title","card","name","Divider","Image","resizeMode","marginStart","width","height","alignContent","alignItems","onPress","source","uri","image","flexDirection","marginBottom","marginTop","alignSelf","gender","duration","buttonStyle","some","xpto","concat","_toConsumableArray","title","fab","visible","icon"],"sources":["/home/tec/Documentos/not-work/facisa/pulp-front/Mobile_2_Bruno/front/src/pages/Home/Home.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { ScrollView,  Text, View, StatusBar, ToastAndroid, ActivityIndicator, FlatList } from 'react-native'\nimport { Card, Button } from 'react-native-elements'\nimport styles from './HomeStyle';\nimport Icon from 'react-native-vector-icons/Icon';\nimport Icon3 from 'react-native-vector-icons/AntDesign';\nimport * as RootNavigation from '../navigator/RootNavigation';\nimport { useFonts } from 'expo-font';\nimport { useCallback } from 'react';\nimport * as SplashScreen from 'expo-splash-screen';\nimport { FAB } from '@rneui/themed'\nimport storageService from '../../storageService'\n\n\ntype Movie = {\n    _id: string;\n    name: string;\n    directedBy: string;\n    overview: string;\n    gender: string;\n    duration: string;\n    image: string;\n};\n    \n    \ntype User = {\n    login: string;\n    token: string;\n    image: string;\n}\n\n\nconst Home = ({navigation,wishList,setWishList} : any) => {\n\n    const [isLoading, setLoading] = useState(true);\n    const [data, setData] = useState<Movie[]>([]);\n    const [favorite,setFavorite] = useState(false);\n\n      const callStorage = async ()=> {\n         const userData = await storageService.get('userData')\n         return userData.token\n      };\n\n    const getMovies = async () => {\n       const token = await callStorage();\n        try {\n            \n          const response = await fetch('http://192.168.0.10:3000/api/movie', {headers: {\n            'authorization': \"Bearer \" + token\n          }} );\n          const json = await response.json();\n          setData(json);\n        } catch (error) {\n          console.error(error);\n        } finally {\n          setLoading(false);\n        }\n      };\n      \n      useEffect(() => {\n        getMovies()\n      }, []);\n\n    const openToast = (message: string) => {\n        ToastAndroid.show(message, 3000);\n    }\n\n    const openChat = () => {\n        RootNavigation.navigate('Chat')\n    }\n\n\n    const CustomTitle = () => {\n        return (\n            <Text style={{ fontFamily: 'Aachen', color: 'black', fontSize: 18 }}>Adicionar a Wishlist</Text>\n        );\n    };\n\n\n  return (\n    <>\n    <View style={styles.container}>\n      \n        {isLoading ? (\n        <ActivityIndicator size={'large'} />\n        ) : (\n            <FlatList \n            data={data}\n            keyExtractor={({_id}) => _id}\n            renderItem={({item}) => (\n                <Card theme={{ colors: { primary: '#000000' } }}  key={item._id}>\n                <Card.Title >\n                    <Text style={[styles.card]}>{item.name}</Text>\n                </Card.Title>\n\n                <Card.Divider/>\n                <Card.Image style={{resizeMode:'contain', marginStart:50, width: 200, height: 300, alignContent: 'center', alignItems:'center'}} onPress={() => (RootNavigation.navigate(\"MovieDetails\",{item}))} source={{uri: item.image}}/>\n            <View style={{flexDirection: \"row\", marginBottom: \"5%\", marginTop: \"5%\", alignSelf: 'center'}}>\n                <Text style={[styles.card]}>GÃªnero: {item.gender}</Text>\n            </View>\n            <View style={{flexDirection: \"row\", marginBottom: \"7%\", marginTop: \"3%\", alignSelf: 'center'}}>\n                <Text style={[styles.card]}>DuraÃ§Ã£o: {item.duration}</Text>\n            </View>\n            {\n                favorite ? \n\n                <Icon3 onPress={()=> (setFavorite(false))} name=\"pushpin\" size={25} color=\"#fcb300\"></Icon3>: \n                <Icon3 onPress={()=> (setFavorite(true))} name=\"pushpino\" size={25} color=\"white\"></Icon3>\n            }\n            <Button  buttonStyle={[styles.buttonStyle]} onPress={() => {\n                if( wishList.some(xpto => { \n                    if (xpto.name == item.name){\n                        return true;\n                    }\n\n                    return false;\n                })){\n                    openToast(\"Filme jÃ¡ adicionado na wishlist\")\n                } else {\n                    openToast(\"Filme adicionado na wishlist\")\n                    setWishList([...wishList,item])\n                }\n                }} title={<CustomTitle />}></Button>\n            \n            </Card>\n            )}\n          />\n        )\n        }\n     \n    </View>\n    <FAB\n        style={styles.fab}\n        visible={true}\n        icon={{name: 'chat', color: 'white'}}\n        color='green'\n        onPress={() => openChat()}\n    />\n    </>\n  );\n}\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}